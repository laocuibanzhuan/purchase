![](D:\Project\purchase\项目开发流程加个人总结\img\npm.png)

使用vite创建项目，安装基础依赖，项目文件大致分类，如上图



# 实现element-plus按需引入

element-plus这种组件库的体积都是相当庞大，在项目生产时会造成多冗余

在官网就会有按需引入的教程



# 配置路径别名

打包工具的常用配置项，参照vite官网的案例配置



# 配置代理

先考虑一下，需要配置代理吗？

以往开发项目时，后台服务是别人提供的，前端页面的服务器与后台服务的服务器不相同

会发生同源策略问题，网络请求无法完成，才需要配置代理

而现在，前端页面的服务器与后台服务的服务器相同，端口号不同

也会发生同源策略问题，但我们有两个解决方案

1. 配置代理
2. 在后端中允许跨域

为了练习开发后台的能力，采取第二种方案



# 前端页面与后台服务的端口号可以相同吗

尽管一个端口在任意给定时刻只能由一台服务器监听和服务

测试结果是可以，但vite的服务会覆盖node的服务



# 实现跨域

只需在后端的响应中配置Access-Control-Allow-Origin响应头即可实现



# GET跨域的缓存机制

同源策略中跨域请求可以发起，浏览器可以接收数据，数据被浏览器拦截，网页无法获取

浏览器会通过配置的响应头处理返回的数据

由于浏览器缓存，在第一次跨域请求时，浏览器会检查响应头中的 cors相关字段

如果符合规则，则会将响应头中的这些字段存储在浏览器缓存中，并建立一条记录

当下次发起跨域请求时，浏览器会检查该记录

如果存在，则认为服务器已经设置过相关响应头，因此不再需要重复设置



浏览器中跨域缓存在以下情况下会更新：

1. 强制缓存过期
2. 缓存校验失败

当然还可以手动更新

